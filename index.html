<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Durham Athletic FC â€“ Career Hub</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#0b1f3a;color:#fff;padding:20px}
h1,h2,h3{color:#f5c542}
button{padding:8px;margin:4px;font-weight:bold}
table{width:100%;border-collapse:collapse;background:#fff;color:#000;margin-bottom:20px}
th,td{border:1px solid #ccc;padding:6px;text-align:center}
input,select{width:100%}
.legend{cursor:help}
.level-3{color:gold;font-weight:bold}
.level-2{color:silver}
.level-1{color:#cd7f32}
small{opacity:.7}
</style>
</head>

<body>

<h1>ğŸ¦… Durham Athletic FC â€“ Career Hub</h1>

<!-- =======================
     ESTADÃSTICAS JUGADORES
======================= -->
<h2>ğŸ“Š EstadÃ­sticas por Temporada</h2>
<button onclick="addStatRow()">â• AÃ±adir fila</button>
<button onclick="saveAll()">ğŸ’¾ Guardar todo</button>
<button onclick="resetAll()">ğŸ—‘ï¸ Reset</button>

<table id="stats">
<tr>
<th>Temp</th><th>Jugador</th><th>Pos</th>
<th>PJ</th><th>G</th><th>A</th><th>CS</th>
<th>Media</th><th>Valor (Â£M)</th>
</tr>
</table>

<datalist id="playersList"></datalist>

<!-- =======================
     TRASPASOS / CESIONES
======================= -->
<h2>ğŸ” Traspasos y Cesiones</h2>
<button onclick="addTransferRow()">â• AÃ±adir movimiento</button>

<table id="transfers">
<tr>
<th>Temp</th><th>Jugador</th>
<th>DirecciÃ³n</th><th>Tipo</th>
<th>Club</th><th>Precio (Â£M)</th>
</tr>
</table>

<!-- =======================
     RÃ‰CORDS DEL CLUB
======================= -->
<h2>ğŸ“ˆ RÃ©cords del Club</h2>
<ul id="records"></ul>

<!-- =======================
     RANKINGS
======================= -->
<h2>ğŸ† Rankings HistÃ³ricos (TOP 10)</h2>
<table id="rankGoals"></table>
<table id="rankAssists"></table>
<table id="rankCS"></table>

<!-- =======================
     HALL OF FAME
======================= -->
<h2>ğŸ›ï¸ Hall of Fame</h2>
<ul id="hallOfFame"></ul>

<script>
/* ======================
   CONFIG HALL OF FAME
====================== */
const HOF_RULES={
 field:{goals:120,assists:80,seasons:5},
 gk:{cs:70,seasons:5}
};

const stats=document.getElementById("stats");
const transfers=document.getElementById("transfers");

/* ======================
   AÃ‘ADIR FILAS
====================== */
function addStatRow(){
 let r=stats.insertRow();
 for(let i=0;i<9;i++)r.insertCell();
 r.cells[0].innerHTML="<input>";
 r.cells[1].innerHTML="<input list='playersList'>";
 r.cells[2].innerHTML="<input placeholder='POR / DC / MC'>";
 for(let i=3;i<9;i++)r.cells[i].innerHTML="<input type='number' value='0'>";
}

function addTransferRow(){
 let r=transfers.insertRow();
 for(let i=0;i<6;i++)r.insertCell();
 r.cells[0].innerHTML="<input>";
 r.cells[1].innerHTML="<input list='playersList'>";
 r.cells[2].innerHTML="<select><option>Entrante</option><option>Saliente</option></select>";
 r.cells[3].innerHTML="<select><option>Traspaso</option><option>CesiÃ³n</option></select>";
 r.cells[4].innerHTML="<input>";
 r.cells[5].innerHTML="<input type='number' value='0'>";
}

/* ======================
   GUARDAR / RESET
====================== */
function saveAll(){
 localStorage.stats=stats.innerHTML;
 localStorage.transfers=transfers.innerHTML;
 recalcAll();
}

function resetAll(){
 if(confirm("Â¿Borrar todo?")){
  localStorage.clear();
  location.reload();
 }
}

/* ======================
   RECÃLCULO GENERAL
====================== */
function recalcAll(){
 let players={},records=document.getElementById("records");
 records.innerHTML="";
 let maxBuy=0,maxSell=0;

 // ESTADÃSTICAS
 [...stats.rows].slice(1).forEach(r=>{
  let n=r.cells[1].firstChild.value;
  if(!n)return;
  let pos=r.cells[2].firstChild.value;
  let g=+r.cells[4].firstChild.value;
  let a=+r.cells[5].firstChild.value;
  let cs=+r.cells[6].firstChild.value;
  let val=+r.cells[8].firstChild.value;
  let s=r.cells[0].firstChild.value;

  if(!players[n])players[n]={pos,g:0,a:0,cs:0,seasons:new Set(),value:0};
  players[n].g+=g;
  players[n].a+=a;
  if(pos==="POR")players[n].cs+=cs;
  players[n].value=Math.max(players[n].value,val);
  players[n].seasons.add(s);
 });

 Object.values(players).forEach(p=>p.seasons=p.seasons.size);

 // TRASPASOS
 [...transfers.rows].slice(1).forEach(r=>{
  let dir=r.cells[2].firstChild.value;
  let price=+r.cells[5].firstChild.value;
  if(dir==="Entrante")maxBuy=Math.max(maxBuy,price);
  if(dir==="Saliente")maxSell=Math.max(maxSell,price);
 });

 records.innerHTML+=`<li>ğŸ’° Fichaje mÃ¡s caro: Â£${maxBuy}M</li>`;
 records.innerHTML+=`<li>ğŸ’¸ Venta mÃ¡s cara: Â£${maxSell}M</li>`;

 buildTop("rankGoals",players,"g","Goles");
 buildTop("rankAssists",players,"a","Asistencias");
 buildTop("rankCS",players,"cs","PorterÃ­as Imbatidas");
 updateHallOfFame(players);
}

/* ======================
   RANKINGS
====================== */
function buildTop(id,p,k,l){
 let t=document.getElementById(id);
 t.innerHTML=`<tr><th>#</th><th>Jugador</th><th>${l}</th></tr>`;
 Object.entries(p).sort((a,b)=>b[1][k]-a[1][k]).slice(0,10)
 .forEach((e,i)=>{
  if(e[1][k]>0)
   t.innerHTML+=`<tr><td>${i+1}</td><td>${e[0]}</td><td>${e[1][k]}</td></tr>`;
 });
}

/* ======================
   HALL OF FAME
====================== */
function updateHallOfFame(p){
 let h=document.getElementById("hallOfFame");
 h.innerHTML="";
 Object.entries(p).forEach(([n,d])=>{
  let ok=d.pos==="POR"
   ? d.cs>=HOF_RULES.gk.cs||d.seasons>=HOF_RULES.gk.seasons
   : d.g>=HOF_RULES.field.goals||d.a>=HOF_RULES.field.assists||d.seasons>=HOF_RULES.field.seasons;
  if(!ok)return;
  h.innerHTML+=`<li class="legend">â­ ${n}</li>`;
 });
}

/* ======================
   CARGA
====================== */
if(localStorage.stats){
 stats.innerHTML=localStorage.stats;
 transfers.innerHTML=localStorage.transfers||transfers.innerHTML;
 recalcAll();
}
</script>

</body>
</html>

