<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Durham Athletic FC â€“ Career Hub</title>

<!-- =========================
     ESTILOS (IDENTIDAD CLUB)
========================= -->
<style>
:root{
  --primary:#0b2545;
  --accent:#7a1e2c;
  --bg:#f4f6f8;
}
body{font-family:Arial;background:var(--bg);margin:20px;}
h1,h2,h3{color:var(--primary);}
table{width:100%;border-collapse:collapse;background:#fff;margin-bottom:25px;}
th,td{border:1px solid #ccc;padding:6px;text-align:center;}
th{background:var(--primary);color:white;}
input,select{width:100%;border:none;text-align:center;}
button{padding:8px 14px;margin:4px 0;background:var(--primary);color:white;border:none;cursor:pointer;}
.secondary{background:var(--accent);}
.section{margin-bottom:45px;}
@media print{
  button,select{display:none;}
  body{background:white;}
}
</style>
</head>

<body>

<h1>Durham Athletic FC</h1>
<p>Career Hub Â· FC 26</p>

<!-- =========================
     1. ESTADÃSTICAS POR TEMPORADA
========================= -->
<div class="section">
<h2>ğŸ“Š EstadÃ­sticas por Temporada</h2>
<button onclick="addRow('stats')">â• AÃ±adir fila</button>
<button onclick="duplicateSeason()">ğŸ“‹ Duplicar plantilla para nueva temporada</button>

<datalist id="playersList"></datalist>

<table id="stats">
<tr>
<th>Temporada</th>
<th>Jugador</th>
<th>PosiciÃ³n</th>
<th>PJ</th>
<th>Goles</th>
<th>Asistencias</th>
<th>PorterÃ­as Imbatidas</th>
<th>Media FC 26</th>
<th>Valor (Â£M)</th>
</tr>
</table>
</div>

<!-- =========================
     2. PALMARÃ‰S
========================= -->
<div class="section">
<h2>ğŸ† PalmarÃ©s</h2>
<button onclick="addRow('honours')">â• AÃ±adir</button>
<table id="honours">
<tr><th>Temporada</th><th>CompeticiÃ³n</th><th>TÃ­tulo</th></tr>
</table>
</div>

<!-- =========================
     3. TRASPASOS Y CESIONES
========================= -->
<div class="section">
<h2>ğŸ” Traspasos y Cesiones</h2>
<button onclick="addRow('transfers')">â• AÃ±adir</button>
<table id="transfers">
<tr>
<th>Temporada</th>
<th>Jugador</th>
<th>Movimiento</th>
<th>Tipo</th>
<th>Club</th>
<th>Precio (Â£M)</th>
</tr>
</table>
</div>

<!-- =========================
     4. RESUMEN / PDF
========================= -->
<div class="section">
<h2>ğŸ“„ Informe del Club</h2>
<select id="seasonFilter"></select>
<button onclick="buildReport()">Generar informe</button>
<button onclick="window.print()">ğŸ“„ Exportar PDF</button>
<div id="report"></div>
</div>

<!-- =========================
     5. RANKINGS
========================= -->
<div class="section">
<h2>ğŸ¥‡ Rankings HistÃ³ricos (Top 10)</h2>
<table id="rankGoals"></table>
<table id="rankAssists"></table>
<table id="rankCS"></table>
</div>

<!-- =========================
     6. RÃ‰CORDS DEL CLUB
========================= -->
<div class="section">
<h2>ğŸ“ˆ RÃ©cords del Club</h2>
<table id="records"></table>
</div>

<!-- =========================
     7. HALL OF FAME
========================= -->
<div class="section">
<h2>ğŸ›ï¸ SalÃ³n de la Fama</h2>
<table id="hall"></table>
</div>

<button class="secondary" onclick="resetData()">ğŸ—‘ï¸ Resetear todos los datos</button>
<button class="secondary" onclick="saveData()">ğŸ’¾ Guardar todo</button>

<!-- =========================
     JAVASCRIPT
========================= -->
<script>

let activeSeason=null;

// =========================
// UTILIDAD: AÃ‘ADIR FILA
// =========================
function addRow(id){
  const t=document.getElementById(id);
  const r=t.insertRow();
  for(let i=0;i<t.rows[0].cells.length;i++){
    r.insertCell().innerHTML="<input>";
  }
}

// =========================
// DUPLICAR PLANTILLA
// =========================
function duplicateSeason(){
  const newSeason=prompt("Nueva temporada (ej: 2027/28)");
  if(!newSeason||!activeSeason) return;

  [...stats.rows].slice(1).forEach(r=>{
    if(r.cells[0].firstChild.value!==activeSeason) return;
    const nr=stats.insertRow();
    for(let i=0;i<9;i++) nr.insertCell().innerHTML="<input>";
    nr.cells[0].firstChild.value=newSeason;
    nr.cells[1].firstChild.value=r.cells[1].firstChild.value;
    nr.cells[2].firstChild.value=r.cells[2].firstChild.value;
  });

  activeSeason=newSeason;
  localStorage.activeSeason=activeSeason;
}

// =========================
// GUARDAR Y CALCULAR
// =========================
function saveData(){
  let players={},seasons=new Set(),hall={},records={
    goals:{v:0},assists:{v:0},cs:{v:0},
    buy:{v:0},sell:{v:0}
  };

  [...stats.rows].slice(1).forEach(r=>{
    const [s,n,pos,,g,a,cs]=[...r.cells].map(c=>c.firstChild.value.trim().toUpperCase());
    if(!s||!n) return;
    seasons.add(s);
    if(!players[n]) players[n]={g:0,a:0,cs:0};
    players[n].g+=+g||0;
    players[n].a+=+a||0;
    if(pos==="POR") players[n].cs+=+cs||0;
    if(+g>records.goals.v) records.goals={v:+g,j:n,s};
    if(+a>records.assists.v) records.assists={v:+a,j:n,s};
    if(pos==="POR" && +cs>records.cs.v) records.cs={v:+cs,j:n,s};
    if(pos!=="POR" && players[n].g>=50) hall[n]="Leyenda ofensiva";
    if(pos==="POR" && players[n].cs>=50) hall[n]="Leyenda bajo palos";
  });

  [...transfers.rows].slice(1).forEach(r=>{
    const mov=r.cells[2].firstChild.value.toUpperCase();
    const price=+r.cells[5].firstChild.value||0;
    const name=r.cells[1].firstChild.value;
    const s=r.cells[0].firstChild.value;
    if(mov==="ENTRANTE" && price>records.buy.v) records.buy={v:price,j:name,s};
    if(mov==="SALIENTE" && price>records.sell.v) records.sell={v:price,j:name,s};
  });

  localStorage.stats=stats.innerHTML;
  localStorage.transfers=transfers.innerHTML;
  localStorage.activeSeason=[...seasons].slice(-1)[0];

  buildRank(rankGoals,players,"g","Goles");
  buildRank(rankAssists,players,"a","Asistencias");
  buildRank(rankCS,players,"cs","PorterÃ­as imbatidas");
  buildRecords(records);
  buildHall(hall);
  buildSeasons(seasons);
}

// =========================
// RANKINGS
// =========================
function buildRank(t,data,key,title){
  t.innerHTML=`<tr><th colspan="3">Top 10 â€“ ${title}</th></tr>
<tr><th>#</th><th>Jugador</th><th>Total</th></tr>`;
  Object.entries(data).sort((a,b)=>b[1][key]-a[1][key]).slice(0,10)
    .forEach((e,i)=>t.innerHTML+=`<tr><td>${i+1}</td><td>${e[0]}</td><td>${e[1][key]}</td></tr>`);
}

// =========================
// RÃ‰CORDS
// =========================
function buildRecords(r){
  records.innerHTML=`
<tr><th>RÃ©cord</th><th>Jugador</th><th>Valor</th><th>Temporada</th></tr>
<tr><td>MÃ¡s goles</td><td>${r.goals.j}</td><td>${r.goals.v}</td><td>${r.goals.s}</td></tr>
<tr><td>MÃ¡s asistencias</td><td>${r.assists.j}</td><td>${r.assists.v}</td><td>${r.assists.s}</td></tr>
<tr><td>MÃ¡s porterÃ­as imbatidas</td><td>${r.cs.j}</td><td>${r.cs.v}</td><td>${r.cs.s}</td></tr>
<tr><td>Fichaje mÃ¡s caro</td><td>${r.buy.j}</td><td>${r.buy.v} MÂ£</td><td>${r.buy.s}</td></tr>
<tr><td>Venta mÃ¡s cara</td><td>${r.sell.j}</td><td>${r.sell.v} MÂ£</td><td>${r.sell.s}</td></tr>`;
}

// =========================
// HALL OF FAME
// =========================
function buildHall(h){
  hall.innerHTML="<tr><th>Jugador</th><th>Motivo</th></tr>";
  Object.entries(h).forEach(e=>hall.innerHTML+=`<tr><td>${e[0]}</td><td>${e[1]}</td></tr>`);
}

// =========================
// TEMPORADAS
// =========================
function buildSeasons(s){
  seasonFilter.innerHTML="";
  [...s].forEach(x=>seasonFilter.innerHTML+=`<option>${x}</option>`);
}

// =========================
// INFORME COMPLETO
// =========================
function buildReport(){
  report.innerHTML=
    `<h3>Informe oficial del club</h3>`+
    rankGoals.outerHTML+
    rankAssists.outerHTML+
    rankCS.outerHTML+
    records.outerHTML+
    hall.outerHTML+
    honours.outerHTML+
    transfers.outerHTML;
}

// =========================
// RESET
// =========================
function resetData(){
  if(confirm("Esto borrarÃ¡ TODOS los datos. Â¿Seguro?")){
    localStorage.clear();
    location.reload();
  }
}

// =========================
// CARGA DATOS
// =========================
if(localStorage.stats) stats.innerHTML=localStorage.stats;
if(localStorage.transfers) transfers.innerHTML=localStorage.transfers;
if(localStorage.activeSeason) activeSeason=localStorage.activeSeason;

</script>
</body>
</html>
